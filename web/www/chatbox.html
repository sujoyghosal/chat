<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Freecycle - Contact Us</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <style>
        #mylist {
            width: auto;
            height: 300px;
            padding: 20px;
            background-color: #a0c7da;
            overflow-y: auto;
            text-align: left;
            list-style-type: none;
        }
        
        .fa-circle {
            color: red;
        }
        /* The heart of the matter */
        
        .testimonial-group>.row {
            overflow-x: auto;
            white-space: nowrap;
        }
        
        .testimonial-group>.row>.col-xs-3 {
            display: inline-block;
            float: none;
        }
        /* Decorations */
        
        .col-xs-3 {
            color: #fff;
            /*font-size: 48px;*/
            padding-bottom: 20px;
            padding-top: 18px;
        }
        
        .col-xs-3:nth-child(3n+1) {
            background: #c69;
        }
        
        .col-xs-3:nth-child(3n+2) {
            background: #9c6;
        }
        
        .col-xs-3:nth-child(3n+3) {
            background: #69c;
        }
        
        .dropdown {
            position: relative;
            display: inline-block;
        }
        
        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #f1f1f1fa;
            min-width: 160px;
            overflow: auto;
            box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
            z-index: 1;
        }
        
        .dropdown-content a {
            color: black;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }
        
        .dropdown a:hover {
            background-color: #ddd
        }
        
        .show {
            display: block;
        }
    </style>
    <script>
        $('.add').click(function() {

            //$("#mylist").append("<li>Test</li>");

            $('#mylist').animate({
                scrollTop: $('#mylist').prop("scrollHeight")
            }, 500);

        });
    </script>
</head>

<body ng-app="myApp" ng-controller="ChatCtrl">
    <div class="row">
        <div class="container testimonial-group">
            <div class="row text-center">
                <legend>Welcome {{ username }} to Live Chatroom</legend>
                <div class="col-xs-3" ng-click="StartChat(x);" ng-repeat="x in onlineUsers track by $index">
                    <ul ng-show="showDropdown">
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle"><i class="fas fa-bell"></i>Profile</a>
                            <ul class="dropdown-menu">
                                <li><a href="#" ng-click="GetPersonality(x);spinner=true;showChat=false;showValues=false;showPersonality=true;showNeeds=false;showConsumption=false;firsttime=false;"><i class="fas fa-user"></i>&nbsp;Personality</a></li>
                                <!--                                <li><a href="#" ng-click="GetPersonality(x);showValues=true;showPersonality=false;showNeeds=false;showConsumption=false;firsttime=false;"><i class="fas fa-dna"></i>&nbsp;Values</a></li>
                                <li><a href="#" ng-click="GetPersonality(x);showValues=false;showPersonality=false;showNeeds=true;showConsumption=false;firsttime=false;"><i class="fas fa-dove"></i>&nbsp;Needs</a></li>-->
                                <li><a href="#" ng-click="GetPersonality(x);spinner=true;showChat=false;showValues=false;showPersonality=false;showNeeds=false;showConsumption=true;firsttime=false;"><i class="fas fa-shopping-cart"></i>&nbsp;Purchasing Pattern</a></li>
                            </ul>
                        </li>
                    </ul>
                    <img ng-hide="nophoto" class="card-img-top" src="{{x.photoURL}}" alt="Card image" style="width:40%">
                    <i ng-show="nophoto" class="fas fa-user"></i>

                    <p>{{ x.fullname }}</p>

                </div>
                <div class="col-xs-1"></div>
            </div>

            <hr>

            <fieldset class="clearfix:after">
                <div class="row Type Text:">
                    <div class="col-xs-12">
                        <div id="chat" class="container">
                            <ul id="mylist">
                                <li ng-repeat="x in chatArray track by $index">
                                    <!--<div class="w3-panel w3-card-4 w3-white" ng-style="{'background-color':x.color}">-->
                                    <div class="container" align="{{x.align}}" style="width:97%;height:auto">
                                        <div ng-style="x.css" align="left">
                                            {{ x.sentby + ': ' + x.text + ' ' }}
                                            <p align="right">
                                                {{ x.time }}
                                            </p>
                                        </div>
                                    </div>
                                    <br>
                                </li>
                                <li>
                                    <a id="bottom"></a>
                                </li>
                            </ul>
                        </div>

                        <form>
                            <input type="text" ng-disabled="!loggedIn" ng-model="chat.text" class="form-control" placeholder="Enter a Message ">
                            <p>
                                <button class="btn btn-primary btn-s add" ng-disabled="chat.text == null" type="submit" ng-click="SendChat(chat)">Submit</button>
                                <!--<button class="btn btn-primary btn-s" type="reset" ng-click="chatArray = null;" ng-hide="false">Clear Chat</button>-->
                                <br>
                                <center/> {{result}}
                            </p>
                            <center/><i ng-show="spinner " class="fas fa-spinner"></i>
                        </form>
                    </div>
                </div>
            </fieldset>
        </div>
    </div>

</body>

</html>